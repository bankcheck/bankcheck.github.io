<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="REGTICKETLABEL" pageWidth="206" pageHeight="104" columnWidth="206" leftMargin="0" rightMargin="0" topMargin="4" bottomMargin="0" isIgnorePagination="true">
	<property name="ireport.zoom" value="3.797498335832424"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="chgfontSize" fill="Solid" fontName="Arial Unicode MS">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{patname}.length() <= 21 ? true : false]]></conditionExpression>
			<style markup="none" isBlankWhenNull="true" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{patname}.length() > 21 ? true : false]]></conditionExpression>
			<style fontName="Arial Unicode MS" fontSize="6" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
		</conditionalStyle>
	</style>
	<parameter name="TicketLblN" class="java.lang.String"/>
	<parameter name="newbarcode" class="java.lang.String"/>
	<parameter name="TicketGenMth" class="java.lang.String"/>
	<field name="patno" class="java.lang.String"/>
	<field name="ticketNo" class="java.lang.String"/>
	<field name="newticketno" class="java.lang.String"/>
	<field name="docname" class="java.lang.String"/>
	<field name="doccname" class="java.lang.String"/>
	<field name="patname" class="java.lang.String"/>
	<field name="patcname" class="java.lang.String"/>
	<field name="arrivalTime" class="java.lang.String"/>
	<field name="apptTime" class="java.lang.String"/>
	<detail>
		<band height="96">
			<staticText>
				<reportElement x="8" y="0" width="85" height="17"/>
				<textElement textAlignment="Center">
					<font size="11" isBold="true" pdfFontName="MHei-Medium" pdfEncoding="UniCNS-UCS2-H" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[輪候號碼 Ticket]]></text>
			</staticText>
			<textField>
				<reportElement x="93" y="0" width="92" height="17"/>
				<textElement>
					<font size="10" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{TicketGenMth}.equals( "A" )?$F{ticketNo}:$F{newticketno}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="29" y="14" width="31" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Doctor: ]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="55" y="24" width="147" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Dr."+ $F{docname}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="8" y="14" width="22" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="MHei-Medium" pdfEncoding="UniCNS-UCS2-H" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[醫生]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="55" y="13" width="136" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="MHei-Medium" pdfEncoding="UniCNS-UCS2-H" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{doccname}+"醫生"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="8" y="33" width="39" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="MHei-Medium" pdfEncoding="UniCNS-UCS2-H" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[病人編號]]></text>
			</staticText>
			<staticText>
				<reportElement x="46" y="33" width="48" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Patient No: ]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="91" y="33" width="49" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{patno}]]></textFieldExpression>
			</textField>
			<image hAlign="Center" vAlign="Middle" isLazy="true">
				<reportElement x="18" y="46" width="137" height="17"/>
				<box>
					<pen lineColor="#FFFFFF"/>
					<topPen lineWidth="0.25" lineStyle="Solid" lineColor="#FFFFFF"/>
					<leftPen lineWidth="0.25" lineStyle="Solid" lineColor="#FFFFFF"/>
					<bottomPen lineWidth="0.25" lineStyle="Solid" lineColor="#FFFFFF"/>
					<rightPen lineWidth="0.25" lineStyle="Solid" lineColor="#FFFFFF"/>
				</box>
				<imageExpression class="java.awt.Image"><![CDATA[com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(new com.google.zxing.MultiFormatWriter().encode($P{newbarcode}.substring(0, $P{newbarcode}.length()-1),com.google.zxing.BarcodeFormat.CODE_39,114,20))]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="9" y="72" width="43" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="MHei-Medium" pdfEncoding="UniCNS-UCS2-H" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[病人姓名: ]]></text>
			</staticText>
			<staticText>
				<reportElement x="9" y="63" width="56" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Patient Name: ]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="53" y="72" width="144" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8" pdfFontName="MHei-Medium" pdfEncoding="UniCNS-UCS2-H" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{patcname}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="81" y="84" width="119" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{apptTime} != null && $F{apptTime}.length() > 0? $F{apptTime}:$F{arrivalTime}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="9" y="84" width="20" height="12"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{apptTime} != null && $F{apptTime}.length() > 0? "預約":"到達"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="29" y="84" width="53" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{apptTime} != null && $F{apptTime}.length() > 0? "Appointment:":"Arrival:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement style="chgfontSize" positionType="Float" stretchType="RelativeToBandHeight" x="65" y="63" width="141" height="13" isPrintWhenDetailOverflows="true"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{patname}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
