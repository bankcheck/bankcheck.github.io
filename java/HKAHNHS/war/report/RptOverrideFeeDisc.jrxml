<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RptOverrideFeeDisc" pageWidth="550" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="510" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="8"/>
	<property name="ireport.y" value="47"/>
	<parameter name="StartDate" class="java.lang.String"/>
	<parameter name="EndDate" class="java.lang.String"/>
	<parameter name="Percentage" class="java.lang.String"/>
	<parameter name="SteCode" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
      to_date($P{StartDate}, 'DD-MM-YYYY') as DateRangeStart,
      to_date($P{EndDate}, 'DD-MM-YYYY')  as DateRangeEnd,
      st.itmcode,
      it.itmname,
      st.stnbamt,
      st.stnnamt,
      st.stndisc,
      st.slpno,
      st.doccode,
      st.usrid,
      d.docfname,
      d.docgname,
      sit.stename,
      st.stnsts,
      st.stncdate
FROM
     sliptx st,
     slip s,
     site sit,
     item it,
     doctor d
WHERE
       st.stncdate >= to_date($P{StartDate},'dd-mm-yyyy')
       and st.stncdate < to_date($P{EndDate}, 'dd-mm-yyyy') + 1
       and st.stnsts IN ('N', 'A')
       and st.stntype= 'D'
       and st.stnbamt <> stnnamt
       and (st.stndisc= $P{Percentage} or $P{Percentage} is null)
       and st.doccode= d.doccode
       and st.itmcode = it.itmcode
       and st.slpno= s.slpno
       and s.stecode= $P{SteCode}
       and s.stecode= sit.stecode]]>
	</queryString>
	<field name="DATERANGESTART" class="java.sql.Timestamp"/>
	<field name="DATERANGEEND" class="java.sql.Timestamp"/>
	<field name="ITMCODE" class="java.lang.String"/>
	<field name="ITMNAME" class="java.lang.String"/>
	<field name="STNBAMT" class="java.lang.String"/>
	<field name="STNNAMT" class="java.lang.String"/>
	<field name="STNDISC" class="java.lang.String"/>
	<field name="SLPNO" class="java.lang.String"/>
	<field name="DOCCODE" class="java.lang.String"/>
	<field name="USRID" class="java.lang.String"/>
	<field name="DOCFNAME" class="java.lang.String"/>
	<field name="DOCGNAME" class="java.lang.String"/>
	<field name="STENAME" class="java.lang.String"/>
	<field name="STNSTS" class="java.lang.String"/>
	<field name="STNCDATE" class="java.lang.String"/>
	<sortField name="ITMCODE"/>
	<variable name="Net" class="java.lang.Double">
		<variableExpression><![CDATA[$V{v_stnbamt} - $V{v_stnnamt}]]></variableExpression>
	</variable>
	<variable name="v_stnnamt" class="java.lang.Double">
		<variableExpression><![CDATA[java.lang.Double.parseDouble($F{STNNAMT})]]></variableExpression>
	</variable>
	<variable name="v_stnbamt" class="java.lang.Double">
		<variableExpression><![CDATA[java.lang.Double.parseDouble($F{STNBAMT})]]></variableExpression>
	</variable>
	<variable name="v_stndisc" class="java.lang.Double">
		<variableExpression><![CDATA[java.lang.Double.parseDouble($F{STNDISC})]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="16" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="395" y="0" width="80" height="16"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
				<reportElement x="475" y="0" width="35" height="16"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="114" splitType="Stretch">
			<staticText>
				<reportElement x="4" y="0" width="100" height="12"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<text><![CDATA[rptOverrideFeeDisc]]></text>
			</staticText>
			<staticText>
				<reportElement x="189" y="61" width="120" height="12"/>
				<textElement textAlignment="Center">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Override Fee Report-Discount]]></text>
			</staticText>
			<staticText>
				<reportElement x="4" y="100" width="18" height="14"/>
				<textElement>
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Item]]></text>
			</staticText>
			<staticText>
				<reportElement x="31" y="100" width="40" height="14"/>
				<textElement>
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Description]]></text>
			</staticText>
			<staticText>
				<reportElement x="164" y="100" width="42" height="14"/>
				<textElement textAlignment="Right">
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Before Disc]]></text>
			</staticText>
			<staticText>
				<reportElement x="209" y="100" width="40" height="14"/>
				<textElement textAlignment="Right">
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[After Disc]]></text>
			</staticText>
			<staticText>
				<reportElement x="252" y="100" width="30" height="14"/>
				<textElement textAlignment="Right">
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Net]]></text>
			</staticText>
			<staticText>
				<reportElement x="285" y="100" width="35" height="14"/>
				<textElement textAlignment="Right">
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[% of Disc]]></text>
			</staticText>
			<staticText>
				<reportElement x="326" y="100" width="42" height="14"/>
				<textElement>
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[ Slip No.]]></text>
			</staticText>
			<staticText>
				<reportElement x="371" y="100" width="35" height="14"/>
				<textElement>
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Doctor]]></text>
			</staticText>
			<staticText>
				<reportElement x="408" y="100" width="45" height="14"/>
				<textElement>
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Cap Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="456" y="100" width="46" height="14"/>
				<textElement>
					<font size="7" isUnderline="true"/>
				</textElement>
				<text><![CDATA[User ID]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="208" y="72" width="40" height="16"/>
				<textElement>
					<font size="7" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{StartDate}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="258" y="72" width="50" height="16"/>
				<textElement>
					<font size="7" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{EndDate}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="248" y="72" width="10" height="16"/>
				<textElement>
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[to]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="189" y="50" width="120" height="12"/>
				<textElement textAlignment="Center">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{STENAME}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="HH:mm:ss">
				<reportElement x="83" y="12" width="100" height="12"/>
				<textElement textAlignment="Left">
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="4" y="12" width="79" height="12"/>
				<textElement>
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(new java.text.SimpleDateFormat(     "dd/MMM/yyyy",Locale.ENGLISH)).format(new java.util.Date())]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement isPrintRepeatedValues="false" x="4" y="0" width="25" height="16"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ITMCODE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="31" y="0" width="130" height="16"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ITMNAME}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
				<reportElement x="252" y="0" width="30" height="16"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$V{Net}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="326" y="0" width="42" height="16"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{SLPNO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="371" y="0" width="35" height="16"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOCCODE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="456" y="0" width="46" height="16"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{USRID}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00">
				<reportElement x="209" y="0" width="40" height="16"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$V{v_stnnamt}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00">
				<reportElement x="164" y="0" width="42" height="16"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$V{v_stnbamt}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00">
				<reportElement x="285" y="0" width="35" height="16"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$V{v_stndisc}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="408" y="0" width="45" height="16"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{STNCDATE}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
