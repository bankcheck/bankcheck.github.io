<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RptEDIList" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="525" leftMargin="35" rightMargin="35" topMargin="71" bottomMargin="71">
	<property name="ireport.zoom" value="1.6500000000000001"/>
	<property name="ireport.x" value="54"/>
	<property name="ireport.y" value="0"/>
	<parameter name="StartDate" class="java.lang.String"/>
	<parameter name="EndDate" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
             st.itmcode,
             decode(ct.ctxmeth,null,'Unknown',decode(ct.ctxmeth,'C','Cash','Q','Cheque','D','Credit Card','E','EPS','U','CUP Card','T','Octopus','O','Other')) as ctxmeth,
             sp.patno, st.slpno,
             decode(sp.slpfname,null,pt.patfname||' '||pt.patgname,sp.slpfname||' '||sp.slpgname) as slpfname,
             st.stnnamt, st.usrid, sc.stecode,
             sc.stename,
             decode(sp.slptype,'O','Out Patient','I','In Patient','Day Case') as slptype,
             st.stnsts,to_char(st.stncdate,'dd/mm/yyyy')stncdate
        FROM sliptx st, slip sp, patient pt, site sc, cashtx ct
        WHERE           st.stncdate >= to_date('01/01/2006', 'DD/MM/YYYY')
                    and st.stncdate< to_date('03/01/2006', 'DD/MM/YYYY')+1
                    and st.itmcode like 'REF%'
                    and st.slpno = sp.slpno
                    and sp.patno = pt.patno(+)
                    and sp.stecode= 'HKAH'
                    and sp.stecode = sc.stecode
                    and ct.ctxid(+) = st.stnxref
                    ORDER BY ct.ctxmeth, sp.slptype, st.itmcode]]>
	</queryString>
	<field name="TYPE" class="java.lang.String"/>
	<field name="PATNO" class="java.lang.String"/>
	<field name="BILLDATE" class="java.lang.String"/>
	<field name="SLPNO" class="java.lang.String"/>
	<field name="BAL" class="java.lang.String"/>
	<field name="SORTDATE" class="java.lang.String"/>
	<field name="PATREFNO" class="java.lang.String"/>
	<field name="STENAME" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="91" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="410" y="0" width="80" height="16"/>
				<textElement textAlignment="Right">
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
				<reportElement x="490" y="0" width="35" height="16"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="0" width="100" height="12"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<text><![CDATA[rptEDIList]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="41" width="525" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[EDI Slip List]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="79" width="67" height="12"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="7" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Type]]></text>
			</staticText>
			<staticText>
				<reportElement x="74" y="79" width="41" height="12"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="7" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Patient No.]]></text>
			</staticText>
			<staticText>
				<reportElement x="134" y="79" width="51" height="12"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="7" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Bill Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="275" y="79" width="77" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Arial Unicode MS" size="7" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Balance]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="52" width="525" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{StartDate}+" - "+$P{EndDate}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="28" width="525" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{STENAME}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="1" y="12" width="79" height="11"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[(new java.text.SimpleDateFormat(     "dd/MMM/yyyy",Locale.ENGLISH)).format(new java.util.Date())]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="HH:mm:ss">
				<reportElement x="80" y="12" width="100" height="11"/>
				<textElement textAlignment="Left">
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="202" y="79" width="62" height="12"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="7" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Slip No.]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="11" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="67" height="11"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{TYPE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="73" y="0" width="56" height="11"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PATNO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="134" y="0" width="68" height="11"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{BILLDATE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="202" y="0" width="62" height="11"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{SLPNO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="275" y="0" width="77" height="11" isPrintWhenDetailOverflows="true"/>
				<box>
					<pen lineColor="#CCCCCC"/>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#CCCCCC"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#CCCCCC"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#CCCCCC"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#CCCCCC"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[Double.parseDouble($F{BAL})]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
