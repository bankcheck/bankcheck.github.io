<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RptOTLogSlipAudit" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="561" leftMargin="17" rightMargin="17" topMargin="17" bottomMargin="0">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="dateRange" class="java.lang.String"/>
	<parameter name="siteName" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["D:\\iReport\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT A.AUDID,A.PATNO AS PATIENTNO,A.ADMUSERID,to_char(A.ADMDATE,'dd/mm/yyyy')ADMDATE,A.PRESLPNO,A.NEWSLPNO,A.PRESEQNO,A.NEWSEQNO,B.STNSEQ,C.STNSEQ AS NEWSTNSEQ,B.PKGCODE AS PREPKGCODE,B.ITMCODE AS PREITMCODE,B.USRID AS PREUSRID,C.PKGCODE AS NEWPKGCODE,C.ITMCODE AS NEWITMCODE,C.USRID AS NEWUSRID
                 FROM OT_LOG_SLIP_AUD A ,SLIPTX B,SLIPTX C
                 WHERE   A.PRESLPNO=B.SLPNO(+)  AND A.PRESEQNO=B.STNSEQ(+) AND A.NEWSLPNO=C.SLPNO(+) AND A.NEWSEQNO=C.STNSEQ(+)
                 AND (A.ADMDATE >= to_date('01/01/2006 00:00:00','DD/MM/YYYY HH24:MI:SS'))  AND (A.ADMDATE <= to_date('01/02/2006 23:59:59','DD/MM/YYYY HH24:MI:SS'))]]>
	</queryString>
	<field name="AUDID" class="java.math.BigDecimal"/>
	<field name="PATIENTNO" class="java.lang.String"/>
	<field name="ADMUSERID" class="java.lang.String"/>
	<field name="ADMDATE" class="java.lang.String"/>
	<field name="PRESLPNO" class="java.lang.String"/>
	<field name="NEWSLPNO" class="java.lang.String"/>
	<field name="PRESEQNO" class="java.math.BigDecimal"/>
	<field name="NEWSEQNO" class="java.math.BigDecimal"/>
	<field name="STNSEQ" class="java.math.BigDecimal"/>
	<field name="NEWSTNSEQ" class="java.math.BigDecimal"/>
	<field name="PREPKGCODE" class="java.lang.String"/>
	<field name="PREITMCODE" class="java.lang.String"/>
	<field name="PREUSRID" class="java.lang.String"/>
	<field name="NEWPKGCODE" class="java.lang.String"/>
	<field name="NEWITMCODE" class="java.lang.String"/>
	<field name="NEWUSRID" class="java.lang.String"/>
	<filterExpression><![CDATA[$F{ADMUSERID}.length()>0]]></filterExpression>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="112" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="48" width="561" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<text><![CDATA[OT Log Book Slip Amendment]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="1" width="100" height="14"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS"/>
				</textElement>
				<text><![CDATA[rptOTLogSlipAudit]]></text>
			</staticText>
			<textField>
				<reportElement x="0" y="61" width="561" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{dateRange}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="35" width="561" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{siteName}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="441" y="0" width="80" height="14"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="521" y="0" width="40" height="14"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="0" y="14" width="158" height="14"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="92" width="69" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Adm. User ID]]></text>
			</staticText>
			<staticText>
				<reportElement x="69" y="92" width="49" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Patient #]]></text>
			</staticText>
			<staticText>
				<reportElement x="127" y="92" width="52" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Adm. Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="183" y="89" width="48" height="12"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="8" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Slip No.]]></text>
			</staticText>
			<staticText>
				<reportElement x="183" y="100" width="48" height="12"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="8" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Prev.]]></text>
			</staticText>
			<staticText>
				<reportElement x="244" y="92" width="55" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[New]]></text>
			</staticText>
			<staticText>
				<reportElement x="333" y="90" width="33" height="22"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Seq
No.]]></text>
			</staticText>
			<staticText>
				<reportElement x="370" y="92" width="58" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Pkg. Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="432" y="92" width="62" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Itm. Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="497" y="92" width="65" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[Tx. User ID.]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="32" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="69" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ADMUSERID}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="69" y="0" width="58" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PATIENTNO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="127" y="0" width="56" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ADMDATE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="183" y="0" width="59" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PRESLPNO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="242" y="0" width="57" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{NEWSLPNO}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement x="299" y="0" width="262" height="32"/>
				<subreportParameter name="audid">
					<subreportParameterExpression><![CDATA[$F{AUDID}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="admdate">
					<subreportParameterExpression><![CDATA[$F{ADMDATE}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="admuserid">
					<subreportParameterExpression><![CDATA[$F{ADMUSERID}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "RptOTLogSlipAudit_Sub.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
