<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptECG2OPD" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="786" leftMargin="28" rightMargin="28" topMargin="28" bottomMargin="28">
	<property name="ireport.zoom" value="1.6500000000000024"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="in_fromdate" class="java.lang.String"/>
	<parameter name="in_todate" class="java.lang.String"/>
	<parameter name="in_sitename" class="java.lang.String"/>
	<queryString>
		<![CDATA[select to_char(r.xrgid) xrgid, to_char(r.xrgdate, 'DD/MM/YYYY') xrgdate, to_char(r.xrgsnddate, 'DD/MM/YYYY') xrgsnddate, j.xjbno, j.doccode, j.xjbtloc, j.xjbtlocdesc, tx.stndesc || ' ' || tx.stndesc1 as stndesc,
     p.patno, p.patfname || ' ' || p.patgname as patname, d.docfname || ' ' || d.docgname as docname from xjob j, xreg r, patient p, sliptx tx, doctor d where
    j.XjbNo = r.XjbNo
        and r.stnid = tx.stnid
        and r.xrgecg = -1
        and r.xrgecgflag = 0
        and r.xrgSndDate >= to_date($P{in_fromdate}, 'dd/mm/yyyy')
        and r.xrgSndDate < to_date($P{in_todate}, 'dd/mm/yyyy') + 1
        and j.doccode = d.doccode
    and j.patno = p.patno

union all

select to_char(r.xrgid) xrgid, to_char(r.xrgdate, 'DD/MM/YYYY') xrgdate, to_char(r.xrgsnddate, 'DD/MM/YYYY') xrgsnddate, j.xjbno, j.doccode, j.xjbtloc, j.xjbtlocdesc, tx.stndesc || ' ' || tx.stndesc1 as stndesc,
     p.orpno as patno, p.orpfname || ' ' || p.orpgname as patname, d.docfname || ' ' || d.docgname as docname from xjob j, xreg r, outrefpat p, sliptx tx, doctor d where
    j.XjbNo = r.XjbNo
        and r.stnid = tx.stnid
        and r.xrgecg = -1
        and r.xrgecgflag = 0
        and r.xrgSndDate >= to_date($P{in_fromdate}, 'dd/mm/yyyy')
        and r.xrgSndDate < to_date($P{in_todate}, 'dd/mm/yyyy') + 1
        and j.doccode = d.doccode
    and j.patno = p.orpno
order by patNo, xjbNo]]>
	</queryString>
	<field name="XRGID" class="java.lang.String"/>
	<field name="XRGDATE" class="java.lang.String"/>
	<field name="XRGSNDDATE" class="java.lang.String"/>
	<field name="XJBNO" class="java.lang.String"/>
	<field name="DOCCODE" class="java.lang.String"/>
	<field name="XJBTLOC" class="java.lang.String"/>
	<field name="XJBTLOCDESC" class="java.lang.String"/>
	<field name="STNDESC" class="java.lang.String"/>
	<field name="PATNO" class="java.lang.String"/>
	<field name="PATNAME" class="java.lang.String"/>
	<field name="DOCNAME" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="89">
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="0" y="54" width="100" height="12"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="0" width="100" height="15"/>
				<textElement>
					<font fontName="Arial Unicode MS"/>
				</textElement>
				<text><![CDATA[rptECG2OPD]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false">
				<reportElement x="201" y="0" width="380" height="18"/>
				<box leftPadding="3"/>
				<textElement textAlignment="Center">
					<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{in_sitename}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
				<reportElement x="760" y="54" width="25" height="13"/>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="712" y="54" width="48" height="13"/>
				<textElement textAlignment="Right">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="201" y="18" width="380" height="18"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[DIAGNOSTIC IMAGING]]></text>
			</staticText>
			<staticText>
				<reportElement x="201" y="36" width="380" height="18"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font size="10" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[E.C.G. To OPD List]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false">
				<reportElement x="201" y="54" width="380" height="18"/>
				<box leftPadding="3"/>
				<textElement textAlignment="Center">
					<font size="10" isBold="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{in_fromdate} + " To " + $P{in_todate}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="15">
			<staticText>
				<reportElement x="0" y="0" width="58" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Send Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="70" y="0" width="71" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[DI No]]></text>
			</staticText>
			<staticText>
				<reportElement x="153" y="0" width="71" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Exam Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="235" y="0" width="58" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Pat. No.]]></text>
			</staticText>
			<staticText>
				<reportElement x="306" y="0" width="114" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="434" y="0" width="89" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Exam]]></text>
			</staticText>
			<staticText>
				<reportElement x="538" y="0" width="43" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[To Loc]]></text>
			</staticText>
			<staticText>
				<reportElement x="592" y="0" width="120" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Dr Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="722" y="0" width="64" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Remark]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="58" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{XRGSNDDATE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="70" y="1" width="71" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{XJBNO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="153" y="1" width="71" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{XRGDATE}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="235" y="0" width="58" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PATNO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="306" y="1" width="114" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{PATNAME}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="434" y="1" width="89" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{STNDESC}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="538" y="1" width="43" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[($F{XJBTLOC} == null ? "" : $F{XJBTLOC} + " ") + ($F{XJBTLOCDESC} == null ? "" : $F{XJBTLOCDESC})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToBandHeight" x="592" y="1" width="120" height="14"/>
				<box bottomPadding="3"/>
				<textElement>
					<font fontName="Arial Unicode MS" size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOCNAME}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="25">
			<staticText>
				<reportElement x="48" y="10" width="32" height="15"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement>
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Count:]]></text>
			</staticText>
			<textField>
				<reportElement x="101" y="10" width="100" height="15"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
