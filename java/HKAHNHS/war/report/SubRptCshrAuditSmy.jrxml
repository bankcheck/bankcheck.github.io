<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SubRptCshrAuditSmy" pageWidth="524" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="524" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[select * from
(select
                to_char(ct.ctxcdate,'dd/mm/yyyy') ctxcdate,
                cs.usrid,
                decode(ct.ctxmeth,'C','Cash','D','Credit Card','Q','Cheque','E','EPS','A','Autopay','U','Cup Card','T','Octopus','Others') as ctxmeth,
                decode(ct.ctxtype,'P','Payout','R','Receipt','A','Advance',ct.ctxtype) as ctxtype,
                cd.ctnctype,
                ct.ctxamt,
                sit.stename
                from cashtx ct, cashier cs, site sit, cardtx cd
                where
                ct.ctnid = cd.ctnid(+) and
                ct.cshcode= cs.cshcode and
                cs.stecode= 'HKAH' and
                cs.stecode= sit.stecode
                and ct.ctxcdate >= to_date('01/01/2005', 'DD/MM/YYYY')
                and ct.ctxcdate< to_date('03/01/2005', 'DD/MM/YYYY')+1
union all
                select
                null as ctxcdate,
                cs.usrid,
                '' as ctxmeth,
                '' as ctxtype,
                '' as ctnctype ,
                0 as ctxamt,
                sit.stename
                from cashier cs, site sit
                where
                cs.stecode= 'HKAH' and
                cs.stecode= sit.stecode
                and (cs.cshsts='N'  or cs.cshsts='O'))]]>
	</queryString>
	<field name="CTXCDATE" class="java.lang.String"/>
	<field name="USRID" class="java.lang.String"/>
	<field name="CTXMETH" class="java.lang.String"/>
	<field name="CTXTYPE" class="java.lang.String"/>
	<field name="CTNCTYPE" class="java.lang.String"/>
	<field name="CTXAMT" class="java.lang.String"/>
	<field name="STENAME" class="java.lang.String"/>
	<variable name="CTXAMT_1" class="java.lang.Double" resetType="Group" resetGroup="Group4_CNTYPE" calculation="Sum">
		<variableExpression><![CDATA[$F{CTXAMT}.length()>0?Double.parseDouble($F{CTXAMT}):0.0]]></variableExpression>
		<initialValueExpression><![CDATA[0.0]]></initialValueExpression>
	</variable>
	<variable name="CTXAMT_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{CTXAMT}.length()>0?Double.parseDouble($F{CTXAMT}):0.0]]></variableExpression>
		<initialValueExpression><![CDATA[0.0]]></initialValueExpression>
	</variable>
	<filterExpression><![CDATA[$F{CTXTYPE}.length()>0]]></filterExpression>
	<group name="Group1_CTXCDATE">
		<groupExpression><![CDATA[$F{CTXCDATE}]]></groupExpression>
	</group>
	<group name="Group2_CTXMETH">
		<groupExpression><![CDATA[$F{CTXMETH}]]></groupExpression>
	</group>
	<group name="Group3_CTXTYPE">
		<groupExpression><![CDATA[$F{CTXTYPE}]]></groupExpression>
	</group>
	<group name="Group4_CNTYPE">
		<groupExpression><![CDATA[$F{CTNCTYPE}]]></groupExpression>
		<groupFooter>
			<band height="16">
				<textField isBlankWhenNull="true">
					<reportElement x="49" y="0" width="100" height="16"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Arial Unicode MS"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{CTXMETH}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="308" y="0" width="129" height="16"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Arial Unicode MS"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{CTXTYPE}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
					<reportElement x="445" y="0" width="76" height="16"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="Arial Unicode MS"/>
					</textElement>
					<textFieldExpression class="java.lang.Double"><![CDATA[$V{CTXAMT_1}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="162" y="0" width="135" height="16"/>
					<textElement>
						<font fontName="Arial Unicode MS"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{CTNCTYPE}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="48" splitType="Stretch">
			<staticText>
				<reportElement x="1" y="1" width="76" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<text><![CDATA[Cashiers Total:]]></text>
			</staticText>
			<staticText>
				<reportElement x="49" y="26" width="100" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<text><![CDATA[Type]]></text>
			</staticText>
			<staticText>
				<reportElement x="471" y="26" width="50" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<line>
				<reportElement x="49" y="46" width="475" height="1"/>
			</line>
		</band>
	</title>
	<summary>
		<band height="24" splitType="Stretch">
			<line>
				<reportElement x="49" y="3" width="475" height="1"/>
			</line>
			<staticText>
				<reportElement x="117" y="4" width="60" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial Unicode MS" isBold="true"/>
				</textElement>
				<text><![CDATA[Net Cash]]></text>
			</staticText>
			<textField pattern="#,##0.00;-#,##0.00">
				<reportElement x="446" y="4" width="76" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial Unicode MS"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$V{CTXAMT_2}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
