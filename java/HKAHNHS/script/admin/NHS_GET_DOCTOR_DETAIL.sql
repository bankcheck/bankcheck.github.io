create or replace FUNCTION "NHS_GET_DOCTOR_DETAIL" (
	v_doccode VARCHAR2
)
	RETURN Types.cursor_type
AS
	outcur types.cursor_type;
BEGIN
	open outcur for
		SELECT
			D.DOCCODE,
			D.DOCFNAME,
			D.DOCGNAME,
			D.DOCCNAME,
			D.DOCIDNO,
			D.DOCSEX,
			D.SPCCODE,
			D.DOCSTS,
			D.DOCTYPE,
			D.DOCPCT_I,
			D.DOCPCT_O,
			D.DOCPCT_D,
			D.DOCADD1,
			D.DOCADD2,
			D.DOCADD3,
			D.DOCHTEL,
			D.DOCOTEL,
			D.DOCPTEL,
			D.DOCTSLOT,
			D.DOCQUALI,
			TO_CHAR(D.DOCTDATE,'DD/MM/YYYY'),
			TO_CHAR(D.DOCSDATE,'DD/MM/YYYY'),
			D.DOCHOMADD1,
			D.DOCHOMADD2,
			D.DOCHOMADD3,
			D.DOCOFFADD1,
			D.DOCOFFADD2,
			D.DOCOFFADD3,
			D.DOCCSHOLY,
			D.DOCMTEL,
			D.DOCEMAIL,
			D.DOCFAXNO,
			D.DOCHOMADD4,
			D.DOCADD4,
			D.DOCOFFADD4,
			D.DOCPICKLIST,
			D.DOCQUALIFY,
			TO_CHAR(D.DOCBDATE, 'DD/MM/YYYY'),
			D.RPTTO,
			D.ISDOCTOR,
			D.TITTLE,
			D.ISOTSURGEON,
			D.ISOTANESTHETIST,
			D.SHOWPROFILE,
			D.BRNO,
			D.DOCREMARK,
			TO_CHAR(D.CPSDATE, 'DD/MM/YYYY'),
			TO_CHAR(D.APLDATE, 'DD/MM/YYYY'),
			TO_CHAR(D.MPSCDATE, 'DD/MM/YYYY'),
			TO_CHAR(D.SLDATE, 'DD/MM/YYYY'),
			D.ISOTENDOSCOPIST,
			C.ECERT1,
			C.ECERT2,
			C.ECERT3,
			C.ECERT4,
			C.ECERT5,
			C.ECERT6,
			C.ECERT7,
			C.ECERT8,
			C.ECERT9,
			C.ECERT10,
			C.CCERT1,
			C.CCERT2,
			C.CCERT3,
			C.CCERT4,
			C.CCERT5,
			C.CCERT6,
			C.CCERT7,
			C.CCERT8,
			C.CCERT9,
			C.CCERT10,
			D.ISPOSTSCHEDULE,
			D.RECEIVEPROMO,
			D.RECEIVEPROMOBYFAX,
			D.HKMCLICNO,
			TO_CHAR(D.CLINSDATE, 'DD/MM/YYYY'),
			TO_CHAR(D.OPPSDATE, 'DD/MM/YYYY'),
			TO_CHAR(D.OPPEDATE, 'DD/MM/YYYY'),
			D.DOCINSURCOMP,
			MSTRDOCCODE,
			D.EHRUID,
			D.COMPANY,
	      DE.STODECLARATION,
	      DE.HKMANO,
	      DE.MPSNO            
		FROM  DOCTOR D
		LEFT JOIN DOCTOR_EXTRA DE ON D.DOCCODE = DE.DOCCODE
		LEFT JOIN DOCCERT C ON D.DOCCODE = C.DOCCODE
		WHERE D.doccode = v_doccode;

	RETURN OUTCUR;
END NHS_GET_DOCTOR_DETAIL;
/
