CREATE OR REPLACE FUNCTION "NHS_ACT_FEESBUDGET" (
	V_ACTION IN VARCHAR2,
	V_PARAM  IN VARCHAR2,
	O_ERRMSG OUT VARCHAR2
)
	RETURN NUMBER
AS
	O_ERRCODE NUMBER;
BEGIN
	O_ERRCODE := 0;
	O_ERRMSG  := 'OK';

	DELETE FROM BUDGET;
	INSERT INTO BUDGET (
		ITCID,
		ITMCODE,
		PKGCODE,
		ACMCODE,
		ITCTYPE,
		GLCCODE,
		ITCAMT1,
		ITCAMT2,
		STECODE)
	SELECT ITCID,
		ITMCODE,
		PKGCODE,
		ACMCODE,
		ITCTYPE,
		GLCCODE,
		ITCAMT1,
		ITCAMT2,
		STECODE
	FROM ITEMCHG
	WHERE CPSID IS NULL;

	DELETE FROM CREDITBGT;
	INSERT INTO CREDITBGT (
		CICID,
		ITMCODE,
		PKGCODE,
		ACMCODE,
		ITCTYPE,
		GLCCODE,
		ITCAMT1,
		ITCAMT2,
		STECODE)
	SELECT CICID,
		ITMCODE,
		PKGCODE,
		ACMCODE,
		ITCTYPE,
		GLCCODE,
		ITCAMT1,
		ITCAMT2,
		STECODE
	FROM CREDITCHG
	WHERE CPSID IS NULL;

	RETURN O_ERRCODE;
END NHS_ACT_FEESBUDGET;
/
