CREATE OR REPLACE FUNCTION "NHS_GET_EBIRTHDTLUPDATE" (
	v_BBPATNO IN VARCHAR2
)
	RETURN TYPES.CURSOR_TYPE AS
	OUTCUR TYPES.CURSOR_TYPE;
BEGIN
	OPEN OUTCUR FOR
		SELECT BB_PATNO,
			BB_GNAME,
			BB_FNAME,
			BB_CFNAME,
			BB_CGNAME,
			BB_SEX,
			NHS_GET_EBIRTHDATEFORMAT(BB_DOB,BB_DOBTIME),
			BB_DOBTIME,
			BB_SLPNO,
			BB_BIRTHTYPE,
			BB_BIRTHORDER,
			BB_BORNB4ARRIVAL,
			BB_BORNONARRIVAL,
			BB_CORDCUTPLACE,
			BB_CORDCUTPLACEDESC,
			BB_ALIVE,
			REMARKS,
			MO_PATNO,
			MO_HKIC,
			MO_TRAVELDOCNO,
			MO_TRAVELDOCTYPE,
			MO_GNAME,
			MO_FNAME,
			MO_CFNAME,
			MO_CGNAME,
			MO_SLPNO,
			DECODE(SUBSTR(TO_CHAR(MO_DOB,'YYYYMMDDHH24MISS'),-6,6),'000000',TO_CHAR(MO_DOB, 'YYYY/MM/DD'),TO_CHAR(MO_DOB, 'YYYY/MM/DD HH24:MI:SS')),
			MO_TEL,
			MO_HKIDHOLDER,
			MO_BIRTHEXACTFLAG,
			MO_RESIDENCE,
			MO_EMAIL,
			NVL(ATTDOC,(SELECT param1 FROM sysparam WHERE parcde ='HosSupName')),
			FA_INFOSOURCE,
			FA_PATNO,
			FA_HKIC,
			FA_TRAVELDOCNO,
			FA_TRAVELDOCTYPE,
			FA_GNAME,
			FA_FNAME,
			FA_CFNAME,
			FA_CGNAME,
			DECODE(SUBSTR(TO_CHAR(FA_DOB,'YYYYMMDDHH24MISS'),-6,6),'000000',TO_CHAR(FA_DOB, 'YYYY/MM/DD'),TO_CHAR(FA_DOB, 'YYYY/MM/DD HH24:MI:SS')),
			REL_CASE_REF,
			FA_TEL,
			FA_HKIDHOLDER,
			FA_BIRTHEXACTFLAG,
			FA_RESIDENCE,
			ADD_TYPE,
			ADD_FLAT,
			ADD_FLOOR,
			ADD_BLOCK,
			ADD_HOUSE,
			ADD_LOTPREFIX,
			ADD_LOTNO,
			ADD_BLDG,
			ADD_ESTATE,
			ADD_STREET,
			ADD_DISTRIC,
			ADD_AREA,
			REFXMLNO,
			BIRTHRETURNNO,
			CONFIRMBY,
			TO_CHAR(COMFIRMDATE, 'DD/MM/YYYY HH24:MI:SS'),
			TO_CHAR(BB_DOB, 'YYYY/MM/DD') || ' ' || DECODE(BB_DOBTIME, NULL, '00:00:00', BB_DOBTIME),
			RECSTATUS,
			TO_CHAR(MO_DOB, 'DD/MM/YYYY')
		FROM  EBIRTHDTL
		WHERE BB_PATNO = v_BBPATNO;
	RETURN OUTCUR;
END NHS_GET_EBIRTHDTLUPDATE;
/
